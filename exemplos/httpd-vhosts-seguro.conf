# XAMPP Virtual Hosts Configuration - VERS√ÉO SEGURA PARA PRODU√á√ÉO
# üîí CONFIGURA√á√ïES SEGURAS PARA AMBIENTE DE PRODU√á√ÉO
# 
# ‚ö†Ô∏è  IMPORTANTE: Estas configura√ß√µes s√£o para AMBIENTE DE PRODU√á√ÉO
# 
# Para usar este arquivo:
# 1. Copie o conte√∫do do VirtualHost desejado
# 2. Cole no final do arquivo: C:\xampp\apache\conf\extra\httpd-vhosts.conf
# 3. Ajuste os caminhos conforme necess√°rio
# 4. Reinicie o Apache
# 
# üîí CONFIGURA√á√ïES DE SEGURAN√áA APLICADAS:
# - -Indexes: Desabilita listagem de diret√≥rios
# - -ExecCGI: Desabilita execu√ß√£o de scripts CGI
# - AllowOverride None: Impede sobrescrita de configura√ß√µes
# - Require local: Apenas acesso local (ajuste conforme necess√°rio)

# ===========================================
# EXEMPLO 1: Projeto PHP B√°sico (PRODU√á√ÉO SEGURA)
# ===========================================
<VirtualHost *:80>
    ServerName projetoPHP.local
    DocumentRoot "C:/caminho/para/seu/projeto"
    <Directory "C:/caminho/para/seu/projeto">
        # üîí CONFIGURA√á√ïES SEGURAS PARA PRODU√á√ÉO
        Options -Indexes -ExecCGI FollowSymLinks
        AllowOverride None
        Require all granted
        
        # üõ°Ô∏è Configura√ß√µes adicionais de seguran√ßa
        # Desabilita acesso a arquivos sens√≠veis
        <FilesMatch "\.(htaccess|htpasswd|ini|log|sh|inc|bak)$">
            Require all denied
        </FilesMatch>
        
        # Desabilita acesso a diret√≥rios sens√≠veis
        <DirectoryMatch "\.(git|svn|env)">
            Require all denied
        </DirectoryMatch>
    </Directory>
</VirtualHost>

# ===========================================
# EXEMPLO 2: Projeto Laravel (PRODU√á√ÉO SEGURA)
# ===========================================
<VirtualHost *:80>
    ServerName laravel.local
    DocumentRoot "C:/caminho/para/seu/laravel/public"
    <Directory "C:/caminho/para/seu/laravel/public">
        # üîí CONFIGURA√á√ïES SEGURAS PARA PRODU√á√ÉO
        Options -Indexes -ExecCGI FollowSymLinks
        AllowOverride None
        Require all granted
        
        # üõ°Ô∏è Configura√ß√µes espec√≠ficas para Laravel
        <FilesMatch "\.(htaccess|htpasswd|ini|log|sh|inc|bak|env)$">
            Require all denied
        </FilesMatch>
        
        # Bloqueia acesso ao diret√≥rio raiz do Laravel
        <Directory "C:/caminho/para/seu/laravel">
            Require all denied
        </Directory>
    </Directory>
</VirtualHost>

# ===========================================
# EXEMPLO 3: Projeto WordPress (PRODU√á√ÉO SEGURA)
# ===========================================
<VirtualHost *:80>
    ServerName wordpress.local
    DocumentRoot "C:/caminho/para/seu/wordpress"
    <Directory "C:/caminho/para/seu/wordpress">
        # üîí CONFIGURA√á√ïES SEGURAS PARA PRODU√á√ÉO
        Options -Indexes -ExecCGI FollowSymLinks
        AllowOverride All
        Require all granted
        
        # üõ°Ô∏è Configura√ß√µes espec√≠ficas para WordPress
        <FilesMatch "\.(htaccess|htpasswd|ini|log|sh|inc|bak|env)$">
            Require all denied
        </FilesMatch>
        
        # Bloqueia acesso a arquivos de configura√ß√£o
        <FilesMatch "wp-config\.php">
            Require all denied
        </FilesMatch>
        
        # Bloqueia acesso a diret√≥rios sens√≠veis
        <DirectoryMatch "(wp-admin|wp-includes|wp-content/uploads)">
            # Permite acesso apenas aos arquivos necess√°rios
            <FilesMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg)$">
                Require all granted
            </FilesMatch>
            <FilesMatch "^(?!.*\.(css|js|png|jpg|jpeg|gif|ico|svg)$).*$">
                Require all denied
            </FilesMatch>
        </DirectoryMatch>
    </Directory>
</VirtualHost>

# ===========================================
# EXEMPLO 4: Configura√ß√£o com SSL/HTTPS
# ===========================================
<VirtualHost *:443>
    ServerName projetoSSL.local
    DocumentRoot "C:/caminho/para/seu/projeto"
    
    # üîí Configura√ß√µes SSL (requer certificado)
    SSLEngine on
    SSLCertificateFile "C:/xampp/apache/conf/ssl.crt/server.crt"
    SSLCertificateKeyFile "C:/xampp/apache/conf/ssl.key/server.key"
    
    <Directory "C:/caminho/para/seu/projeto">
        # üîí CONFIGURA√á√ïES SEGURAS PARA PRODU√á√ÉO
        Options -Indexes -ExecCGI FollowSymLinks
        AllowOverride None
        Require all granted
        
        # üõ°Ô∏è Configura√ß√µes adicionais de seguran√ßa
        <FilesMatch "\.(htaccess|htpasswd|ini|log|sh|inc|bak)$">
            Require all denied
        </FilesMatch>
    </Directory>
</VirtualHost>

# ===========================================
# EXEMPLO 5: Configura√ß√£o com Autentica√ß√£o
# ===========================================
<VirtualHost *:80>
    ServerName projetoAuth.local
    DocumentRoot "C:/caminho/para/seu/projeto"
    <Directory "C:/caminho/para/seu/projeto">
        # üîí CONFIGURA√á√ïES SEGURAS PARA PRODU√á√ÉO
        Options -Indexes -ExecCGI FollowSymLinks
        AllowOverride None
        Require all granted
        
        # üîê Autentica√ß√£o b√°sica (opcional)
        # AuthType Basic
        # AuthName "√Årea Restrita"
        # AuthUserFile "C:/xampp/apache/conf/.htpasswd"
        # Require valid-user
        
        # üõ°Ô∏è Configura√ß√µes adicionais de seguran√ßa
        <FilesMatch "\.(htaccess|htpasswd|ini|log|sh|inc|bak)$">
            Require all denied
        </FilesMatch>
    </Directory>
</VirtualHost>
